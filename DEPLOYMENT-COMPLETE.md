# ğŸ‰ Poker Night App - Deployment Complete!

## âœ… What's Live

**Production URL:** https://pokernight.famylin.com

**Architecture:**
- **Frontend:** Vercel (serving the React app)
- **Backend:** Railway (Node.js/Express API)
- **Database:** PostgreSQL on Railway
- **Domain:** famylin.com (registered on Cloudflare, $18.66/year)

## ğŸ”§ Infrastructure Details

### Frontend (Vercel)
- URL: https://pokernight.famylin.com
- Project: poker-night-app
- Environment Variables:
  - `VITE_API_URL` = `https://poker-night-app-production-985f.up.railway.app/api`

### Backend (Railway)
- URL: https://poker-night-app-production-985f.up.railway.app
- Project: triumphant-integrity (in ollieorganizer's workspace)
- Services:
  - poker-night-app (Node.js backend)
  - Postgres (database)
- Environment Variables:
  - `DATABASE_URL` (auto-generated)
  - `GOOGLE_CLIENT_ID`
  - `GOOGLE_CLIENT_SECRET`
  - `FRONTEND_URL` = `https://pokernight.famylin.com`
  - `CUSTOM_DOMAIN` = `pokernight.famylin.com`

### Database (PostgreSQL on Railway)
- Tables created and ready:
  - users
  - players
  - sessions
  - session_players
  - user_players
  - (+ migration for game_type column)

### Domain (Cloudflare)
- Domain: famylin.com
- DNS Record: `pokernight` CNAME â†’ `cname.vercel-dns.com`
- Cost: $18.66/year

### Google OAuth
- Project: Poker night app
- Configured redirect URIs:
  - `http://localhost:3001/api/auth/google/callback` (development)
  - `https://poker-night-app-production-985f.up.railway.app/api/auth/google/callback` (Railway)
  - `https://pokernight.famylin.com/api/auth/google/callback` (production)

## ğŸ§ª Tested & Working

âœ… Domain loads: https://pokernight.famylin.com  
âœ… Google OAuth login works  
âœ… Frontend â†’ Backend API connection working  
âœ… Database queries working  
âœ… Existing players visible in UI  

## ğŸ“¦ Next Step: Data Migration

You now need to migrate your old data from the old Railway database to the new one.

### Quick Start

1. **Get your OLD database URL:**
   - Go to Railway dashboard (Edwin Lin's workspace)
   - Click "unique-forgiveness" project
   - Click "Postgres" service â†’ "Variables" tab
   - Copy the `DATABASE_URL` value

2. **Run the migration script:**
   ```bash
   cd poker-night-app
   ./migrate-data.sh
   ```

3. **Or follow the manual guide:**
   See `DATA-MIGRATION-GUIDE.md` for detailed step-by-step instructions

### What Gets Migrated

- All users (login accounts)
- All players (people who play poker)
- All sessions (past poker games)
- All session data (buy-ins, cash-outs, etc.)
- Seating arrangements and charts
- User metrics

## ğŸ’° Total Cost

- **Domain:** $18.66/year (famylin.com on Cloudflare)
- **Hosting:** Free tier currently (Railway + Vercel)
- **Total:** $18.66/year (or $1.56/month)

## ğŸ“ Important Files

- `DATA-MIGRATION-GUIDE.md` - Step-by-step migration guide
- `migrate-data.sh` - Automated migration script
- `DOMAIN-SETUP-COMPLETE.md` - Domain setup details
- `DEPLOYMENT-TEST-WORKFLOW.md` - Testing checklist

## ğŸ” Security Notes

- Google OAuth credentials are stored in Railway environment variables
- Database credentials are auto-generated by Railway
- All traffic uses HTTPS
- CORS is configured to only allow requests from the frontend domain

## ğŸ¯ What's Different from Old App

### Architecture Changes
- **Old:** Single Railway deployment with SQLite
- **New:** Separate frontend (Vercel) + backend (Railway) with PostgreSQL

### Database Changes
- **Old:** SQLite file storage
- **New:** PostgreSQL (more robust, better for production)
- Schema is compatible - data should migrate cleanly

### Domain Changes
- **Old:** edwinpokernight.com (subdomain: api.edwinpokernight.com)
- **New:** pokernight.famylin.com (family + Lin surname)

## ğŸš€ Post-Migration Steps

After migrating your data:

1. **Test thoroughly:**
   - Log in with your account
   - Verify old sessions are visible
   - Check player data
   - Create a test session

2. **If everything works:**
   - Update any bookmarks
   - Notify other users (if any)
   - Keep old app running for a week as backup
   - Then decommission old Railway project

3. **If issues arise:**
   - Check browser console for errors
   - Check Railway logs
   - Data is still safe in old database

## ğŸ“ Support

If you need help:
- Check Railway logs for backend errors
- Check Vercel logs for frontend errors  
- Browser console for client-side errors
- Let me know and I can debug!

---

**Deployment Date:** January 31, 2026  
**Deployed By:** Ollie (AI Assistant)  
**Status:** âœ… Live and Ready for Data Migration
